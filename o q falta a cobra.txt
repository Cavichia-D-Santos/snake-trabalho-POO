import pygame

class Snake:
    def __init__(self, largura_tela, altura_tela):
        # Inicializa a posição inicial da cobra (no meio da tela)
        self.corpo = [(100, 100), (90, 100), (80, 100)]  # Corpo da cobra como lista de tuplas (x, y)
        self.direcao = 'DIREITA'  # Direção inicial
        self.corpo_colorido = (0, 255, 0)  # Cor do corpo da cobra (verde)
        self.largura_tela = largura_tela
        self.altura_tela = altura_tela

    def mover(self):
        """Move a cobra na direção atual."""
        cabeca_x, cabeca_y = self.corpo[0]

        if self.direcao == 'DIREITA':
            nova_cabeca = (cabeca_x + 10, cabeca_y)
        elif self.direcao == 'ESQUERDA':
            nova_cabeca = (cabeca_x - 10, cabeca_y)
        elif self.direcao == 'CIMA':
            nova_cabeca = (cabeca_x, cabeca_y - 10)
        elif self.direcao == 'BAIXO':
            nova_cabeca = (cabeca_x, cabeca_y + 10)

        # Adiciona a nova cabeça à lista do corpo e remove o último segmento
        self.corpo = [nova_cabeca] + self.corpo[:-1]

    def crescer(self):
        """Faz a cobra crescer ao adicionar um novo segmento."""
        cabeca_x, cabeca_y = self.corpo[0]
        if self.direcao == 'DIREITA':
            nova_cabeca = (cabeca_x + 10, cabeca_y)
        elif self.direcao == 'ESQUERDA':
            nova_cabeca = (cabeca_x - 10, cabeca_y)
        elif self.direcao == 'CIMA':
            nova_cabeca = (cabeca_x, cabeca_y - 10)
        elif self.direcao == 'BAIXO':
            nova_cabeca = (cabeca_x, cabeca_y + 10)

        # Adiciona a nova cabeça na frente, mas não remove a cauda
        self.corpo = [nova_cabeca] + self.corpo

    def colisao(self):
        """Verifica se a cobra colidiu com ela mesma ou com as bordas da tela."""
        cabeca = self.corpo[0]
        # Verifica colisão com as paredes
        if cabeca[0] < 0 or cabeca[0] >= self.largura_tela or cabeca[1] < 0 or cabeca[1] >= self.altura_tela:
            return True
        # Verifica colisão com o próprio corpo
        if cabeca in self.corpo[1:]:
            return True
        return False

    def desenhar(self, tela):
        """Desenha a cobra na tela."""
        for segmento in self.corpo:
            pygame.draw.rect(tela, self.corpo_colorido, pygame.Rect(segment[0], segment[1], 10, 10))